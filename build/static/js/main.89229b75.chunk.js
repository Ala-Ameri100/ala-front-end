(this.webpackJsonpchatbot=this.webpackJsonpchatbot||[]).push([[0],{227:function(e,t,n){e.exports=n(640)},231:function(e,t,n){},640:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(16),r=n.n(s),i=(n(231),n(77)),l=n(13),c=n(24),u=n(25),h=n(40),d=n(27),p=n(26),m=n(12),g=n(664),f=n(662),b=n(52),v=n(660),w=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(v.a,{show:e.modalOpen,onHide:e.handleModalOpen},o.a.createElement(v.a.Header,{closeButton:!0},o.a.createElement(v.a.Title,null,"Info")),o.a.createElement(v.a.Body,null,"ALA is a conversational AI. ",o.a.createElement("br",null),"ALA stands for Ameri Learning App")))},y=n(140),C=n.n(y),k=n(202),E=n(36),x=n(658),A=n(659),S=n(208),O=n(209),M=(n(235),function(){return window.location.reload()}),j=function(e){var t=Object(a.useState)(""),n=Object(E.a)(t,2),s=n[0],r=n[1],i=Object(a.useState)(""),l=Object(E.a)(i,2),c=l[0],u=l[1],h={},d="",p=Object(a.useState)(""),m=Object(E.a)(p,2),g=(m[0],m[1],Object(a.useState)(!1)),f=Object(E.a)(g,2),b=f[0],w=f[1];function y(){return(y=Object(k.a)(C.a.mark((function t(n){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),""!==s&&""!==c){t.next=6;break}return alert("Fields are required"),t.abrupt("return");case 6:w(!0),h={username:s,password:c},fetch("/api/auth/signin",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Origin":"*"},body:JSON.stringify(h)}).then((function(e){return e.json()})).then((function(t){console.log("Error message",t.message),d=t.message,console.log("Data after login",t.username),"Bad credentials"===d?(console.log("Login Failed"),alert("Signin failed! Please try Again")):(console.log("Login Success"),localStorage.setItem("accessToken",t.accessToken),localStorage.setItem("uname",t.username),e.handleLoginModalOpen(),window.location.reload(!1)),w(!1)})).catch((function(){console.log("Im here")})),console.log("Error message",d);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return o.a.createElement(o.a.Fragment,null,o.a.createElement(v.a,{show:e.lmodalOpen,onHide:e.handleLoginModalOpen,onExit:M,backdrop:"static"},o.a.createElement(v.a.Header,{closeButton:!0,className:"login-nav"},o.a.createElement(v.a.Title,null,"Login")),o.a.createElement(v.a.Body,null,o.a.createElement("div",{className:"Login"},o.a.createElement("form",{onSubmit:function(e){return y.apply(this,arguments)},id:"formid"},o.a.createElement(S.a,{controlId:"username"},"Username",o.a.createElement(O.a,{autoFocus:!0,required:!0,id:"uname",value:s,onChange:function(e){return r(e.target.value)}})),o.a.createElement(S.a,{controlId:"password"},"Password",o.a.createElement(O.a,{value:c,id:"pwd",required:!0,onChange:function(e){return u(e.target.value)},type:"password","aria-describedby":"pwdHelp"}),o.a.createElement("small",{id:"pwdHelp",class:"text-muted"},"Must be 6-40 characters long")),!b&&o.a.createElement(x.a,{variant:"primary",type:"submit"},"Login"),b&&o.a.createElement(x.a,{variant:"primary",type:"submit",disabled:!0},o.a.createElement(A.a,{animation:"border",variant:"light",size:"sm",as:"span"})," Loading...")," ",o.a.createElement(x.a,{variant:"secondary",onClick:function(e){e.preventDefault(),r(""),u("")}},"Clear"))))))},T=function(e){var t=Object(a.useState)(""),n=Object(E.a)(t,2),s=n[0],r=n[1],i=Object(a.useState)('["mod","user"]'),c=Object(E.a)(i,2),u=c[0],h=(c[1],Object(a.useState)("")),d=Object(E.a)(h,2),p=d[0],m=d[1],g=Object(a.useState)(""),f=Object(E.a)(g,2),b=f[0],w=f[1],y=(Object(l.f)(),{}),C=Object(a.useState)(!1),k=Object(E.a)(C,2),M=k[0],j=k[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(v.a,{show:e.smodalOpen,onHide:e.handleSignupModalOpen,backdrop:"static"},o.a.createElement(v.a.Header,{closeButton:!0,className:"login-nav"},o.a.createElement(v.a.Title,null,"Sign Up")),o.a.createElement(v.a.Body,null,o.a.createElement("div",{className:"Login"},o.a.createElement("form",{onSubmit:function(t){console.log("Username",s),console.log("Role",u),console.log("email",p),console.log("password",b),t.preventDefault(),j(!0),y={username:s,password:b.trim(),email:p.trim(),role:["mod","user"]},console.log("signupRequest---\x3e"+JSON.stringify(y)),fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Origin":"*"},body:JSON.stringify(y)}).then((function(e){return e.json()})).then((function(t){!0;var n=t.message;"Error: Username is already taken!"===n?alert("Username is already taken!"):"Error: Email is already in use!"===n?alert("Email is already in use!"):"User registered successfully!"===n?(e.handleSignupModalOpen(),e.handleLoginModalOpen()):alert("Enter valid Credentials!"),console.log("Error message",t.message),console.log("response--"+JSON.stringify(t)),j(!1)}))}},o.a.createElement(S.a,null,"Username",o.a.createElement(O.a,{autoFocus:!0,value:s,onChange:function(e){return r(e.target.value)},required:!0})),o.a.createElement(S.a,null,"Password",o.a.createElement(O.a,{value:b,onChange:function(e){return w(e.target.value)},required:!0,"aria-describedby":"pwdHelp",type:"password"}),o.a.createElement("small",{id:"pwdHelp",class:"text-muted"},"Must be 6-40 characters long")),o.a.createElement(S.a,{controlId:"email"},"Email",o.a.createElement(O.a,{type:"email",value:p,onChange:function(e){return m(e.target.value)},required:!0})),!M&&o.a.createElement(x.a,{variant:"primary",type:"submit"},"Signup"),M&&o.a.createElement(x.a,{variant:"primary",type:"submit",disabled:!0},o.a.createElement(A.a,{animation:"border",variant:"light",size:"sm",as:"span"})," Loading...")," ",o.a.createElement(x.a,{variant:"secondary",onClick:function(e){e.preventDefault(),r(""),w(""),m("")}},"Clear"))))))},Q=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleModalOpen=function(){a.setState((function(e){return{modalOpen:!e.modalOpen}}))},a.handleLogout=function(){console.log("inside logout"),localStorage.setItem("accessToken",""),localStorage.removeItem("uname"),a.handleLoginModalOpen()},a.handleLoginModalOpen=function(){a.setState((function(e){return{lmodalOpen:!e.lmodalOpen}}))},a.handleSignupModalOpen=function(){a.setState((function(e){return{smodalOpen:!e.smodalOpen}}))},a.state={modalOpen:!1,lmodalOpen:!1,smodalOpen:!1,userlogin:"Guest"},a}return Object(u.a)(n,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(g.a,{className:"color-nav"},o.a.createElement(g.a.Brand,{href:"/",className:"ameri-logo"},o.a.createElement("img",{alt:"Ameri100",style:{width:"7rem",marginBottom:"5px"},src:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/Ameri100_logo.png/320px-Ameri100_logo.png"})),o.a.createElement("div",null,localStorage.getItem("uname")?o.a.createElement(f.a.Item,{style:{color:"white"}},"Hi ",localStorage.getItem("uname")," ! "):o.a.createElement(f.a.Item,null)),o.a.createElement("hr",null),localStorage.getItem("accessToken")?o.a.createElement(f.a.Link,{onClick:this.handleLogout,style:{color:"white",textDecoration:"none"}},o.a.createElement(b.e,null)," Logout"):o.a.createElement(a.Fragment,null,o.a.createElement(f.a.Link,{onClick:this.handleLoginModalOpen,style:{color:"white",textDecoration:"none"}},o.a.createElement(b.d,null)," Login"),o.a.createElement(f.a.Link,{onClick:this.handleSignupModalOpen,style:{color:"white",textDecoration:"none"}},o.a.createElement(b.f,null)," Signup")," "),o.a.createElement("div",{className:"upload-icon"},o.a.createElement(b.c,{className:"faq-icon",size:"1.5em",cursor:"pointer"}),o.a.createElement(b.a,{className:"fai-icon",size:"1.5em",cursor:"pointer",onClick:this.handleModalOpen}))),o.a.createElement(w,{modalOpen:this.state.modalOpen,handleModalOpen:this.handleModalOpen}),o.a.createElement(j,{lmodalOpen:this.state.lmodalOpen,handleLoginModalOpen:this.handleLoginModalOpen}),o.a.createElement(T,{smodalOpen:this.state.smodalOpen,handleSignupModalOpen:this.handleSignupModalOpen,handleLoginModalOpen:this.handleLoginModalOpen}))}}]),n}(a.Component),I=n(11),D=n(102);function L(){var e=Object(m.a)(["\n    min-width: 20%;\n    max-width: 90%;\n    background-color: ",";\n    border-radius: ",";\n    margin: 5px;\n    align-self: ",";\n    // box-shadow: 0px 2px 15px ;\n    box-shadow: 0px 3px 5px ; \n    p {\n        padding: 5px;\n        color: white;\n    }\n\n    &:hover {\n      opacity: ",";\n      cursor: ",";\n      }\n    animation: 0.5s ",";\n"]);return L=function(){return e},e}function B(){var e=Object(m.a)(["\n    min-width: 30%;\n    max-width: 100%;\n    align-self: ",";\n\n"]);return B=function(){return e},e}function R(){var e=Object(m.a)(["\n    visibility:",";\n    width:40px;\n    height:50px;\n"]);return R=function(){return e},e}function N(){var e=Object(m.a)(["\n    margin: 32px;\n    span {\n      width: 10px;\n      height: 10px;\n      background-color: black;\n      display: inline-block;\n      margin: 1px;\n      border-radius: 50%;\n      &:nth-child(1) {\n        animation: bounce 1s infinite;\n      }\n      &:nth-child(2) {\n        animation: bounce 1s infinite .2s;\n      }\n      &:nth-child(3) {\n        animation: bounce 1s infinite .4s;\n      }\n    }\n    @keyframes bounce {\n        0% {\n          transform: translateY(0px);\n        }\n        50% {\n          transform: translateY(8px);\n        }\n        100% {\n          transform: translateY(0px);\n        }\n      }\n      \n"]);return N=function(){return e},e}function F(){var e=Object(m.a)(["",""]);return F=function(){return e},e}var K=Object(I.b)(F(),D.bounceIn),q=(I.a.div(N()),I.a.img(R(),(function(e){return e.botMsg?"visible":"Hidden"}))),U=I.a.div(B(),(function(e){return e.botMsg?"flex-start":"flex-end"})),H=I.a.div(L(),(function(e){return function(e){return e.clicks?"#28a745":e.Multioption?"#e68a00":e.botMsg?"#0069d9":"#989898"}(e)}),(function(e){return e.botMsg?"0px 7px 7px 7px":"7px 0px 7px 7px"}),(function(e){return e.botMsg?"flex-start":"flex-end"}),(function(e){return function(e){return e.clicks||e.Multioption?.75:e.botMsg?"#0069d9":"#989898"}(e)}),(function(e){return function(e){return e.clicks||e.Multioption?"pointer":(e.botMsg,"")}(e)}),K);var P=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement(U,{botMsg:this.props.botMsg,className:"divBub"},o.a.createElement(q,{botMsg:this.props.botMsg,src:"".concat("","/assets/logobot.png")}),o.a.createElement(H,{choice:this.props.choice,botMsg:this.props.botMsg,clicks:this.props.clicks,onClick:function(){return e.props.handleClick(e.props.text)}},o.a.createElement("p",null,this.props.text)))}}]),n}(o.a.Component);function z(){var e=Object(m.a)(["\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    min-width: 150px;\n    max-width: 500px;\n    height: 85%;\n    overflow-y: auto;\n    padding: 5px;\n    margin-bottom: 10px;\n    border-radius: 5%;\n    \n"]);return z=function(){return e},e}var J=I.a.div(z()),W=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(){var e=this;setTimeout((function(){e.messagesEnd.scrollIntoView({behavior:"smooth"})}),500)}},{key:"handleClick",value:function(e,t){console.log("Inside handle click",e),t&&this.props.onClick(e)}},{key:"handleCheck",value:function(e,t){t&&(this.props.onCheck(e),console.log("Option is",e))}},{key:"render",value:function(){var e=this;return o.a.createElement(J,{id:"chatDiv"},this.props.chatArray.map((function(t,n){return o.a.createElement(P,{key:n,text:t.msg,botMsg:t.botMsg,choice:t.choice,clicks:t.clickable,handleClick:function(n){return e.handleClick(n,t.clickable)},handleCheck:function(n){return e.handleCheck(n,t.Multioption)}})})),o.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}}))}}]),n}(a.Component),_=n(661),G=o.a.createContext({toggleListening:function(){}});function V(){var e=Object(m.a)(["\n    display: flex;\n    min-height: 15%;\n    width: 100%;\n    /* min-width: 150px;\n    max-width: 500px; */\n    align-items: end;\n    padding: 5px;\n    padding:10px;\n\n    textarea {\n        resize: none;\n        width: 100%;\n        height: 100%;\n        margin: 0px 5px 0px 5px;\n        \n        /*box-shadow: 0px 5px 5px  grey;*/\n    }\n    \n    div {\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n\n        button {\n            margin: 5px;\n            // box-shadow: 0px 5px 5px  grey;\n        }\n    }\n"]);return V=function(){return e},e}var Y=I.a.div(V()),$=window.SpeechRecognition||window.webkitSpeechRecognition,X=$?new $:null;X&&(X.lang="en-IN",X.interimResults=!1,X.maxAlternatives=1);var Z=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={value:"",modal:{show:!1}},a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.handleEnter=a.handleEnter.bind(Object(h.a)(a)),a.handleSend=a.handleSend.bind(Object(h.a)(a)),a.startRecognition=a.startRecognition.bind(Object(h.a)(a)),a}return Object(u.a)(n,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleEnter",value:function(e){"Enter"===e.key&&this.handleSend()}},{key:"handleSend",value:function(){var e=this.state.value;this.props.onSend(e),this.setState({value:""})}},{key:"startRecognition",value:function(){var e=this,t=this.context.toggleListening;X?(t(),X.start(),console.log("listening..."),X.onresult=function(t){var n=t.results[0][0].transcript;e.setState({value:n})},X.onend=function(){console.log("Speech error"),t()}):this.setState({modal:{show:!0}})}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Y,null,o.a.createElement(_.a.Control,{as:"textarea",style:{"box-shadow":"0px 3px 15px"},placeholder:"Enter your message....",value:this.state.value,onKeyUp:this.handleEnter,onChange:this.handleChange}),o.a.createElement("div",null,o.a.createElement(x.a,{style:{"box-shadow":"0px 3px 15px"},variant:"outline-primary",onClick:this.handleSend},o.a.createElement(b.g,{size:"1.5em"})),o.a.createElement(x.a,{style:{"box-shadow":"0px 3px 15px"},variant:"outline-success",onClick:this.startRecognition},o.a.createElement(b.b,{size:"1.5em"})))),o.a.createElement(v.a,{show:this.state.modal.show,onHide:function(){return e.setState({modal:{show:!1}})}},o.a.createElement(v.a.Header,{closeButton:!0},o.a.createElement(v.a.Title,null,"Oops!")),o.a.createElement(v.a.Body,null,o.a.createElement("p",null,"Speech recognition not supported by browser."))))}}]),n}(a.Component);Z.contextType=G;var ee=n(666),te=n(148),ne=n(215);function ae(){var e=Object(m.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 80%;\n"]);return ae=function(){return e},e}function oe(){var e=Object(m.a)(["\n    display: flex;\n    height: calc(100vh - 58px);\n    overflow-y: auto;\n    justify-content: center;\n"]);return oe=function(){return e},e}var se=I.a.div(oe()),re=I.a.div(ae()),ie={labels:["MERN","LAMP","MEAN"],datasets:[{data:[300,50,100],backgroundColor:["#FF6384","#36A2EB","#FFCE56"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56"]}]},le={datasets:[{data:[11,16,7,3,14],backgroundColor:["#FF6384","#4BC0C0","#FFCE56","#E7E9ED","#36A2EB"],label:"My dataset"}],labels:["Not Interested","Less Interested","Neutral","Interested","Most Interested"]},ce=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(se,null,o.a.createElement(re,null,o.a.createElement(ee.a,{style:{width:"80%",boxShadow:"0px 5px 5px  grey",backgroundColor:"#f5f5ef"}},o.a.createElement(ee.a.Body,null,o.a.createElement(ee.a.Title,null,"Score board"),o.a.createElement(ne.a,{value:e.AnsweredQuestions,maxValue:e.TotalQuestions}))),o.a.createElement("br",null),o.a.createElement(ee.a,{style:{width:"80%",boxShadow:"0px 5px 5px  grey",backgroundColor:"#f5f5ef"}},o.a.createElement(ee.a.Body,null,o.a.createElement(ee.a.Title,null,"Stack Share"),o.a.createElement(te.a,{data:ie}))),o.a.createElement("br",null),o.a.createElement(ee.a,{style:{width:"80%",boxShadow:"0px 5px 5px  grey",backgroundColor:"#f5f5ef"}},o.a.createElement(ee.a.Body,null,o.a.createElement(ee.a.Title,null,"HANA EDGE"),o.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},o.a.createElement("iframe",{title:"hanaEdge",width:"560",height:"315",src:"https://www.youtube-nocookie.com/embed/v0wiWJETQVw",frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})))),o.a.createElement("br",null),o.a.createElement(ee.a,{style:{width:"80%",boxShadow:"0px 5px 5px  grey",backgroundColor:"#f5f5ef"}},o.a.createElement(ee.a.Body,null,o.a.createElement(ee.a.Title,null,"User Sentiment"),o.a.createElement(te.b,{data:le}))))))};function ue(){var e=Object(m.a)(["\n  background-color: #45cafc;\n  border-radius: 50%;\n  width: 10px;\n  height: 10px;\n  margin: 0 5px;\n\n  /* Animation */\n  animation: "," 0.5s linear infinite;\n  animation-delay: ",";\n"]);return ue=function(){return e},e}function he(){var e=Object(m.a)(["\n  display: flex;\n  align-items: flex-end;\n"]);return he=function(){return e},e}function de(){var e=Object(m.a)(["\n  0% { margin-bottom: 0; }\n  50% { margin-bottom: 10px }\n  100% { margin-bottom: 0 }\n"]);return de=function(){return e},e}var pe=Object(I.b)(de()),me=I.a.div(he()),ge=I.a.div(ue(),pe,(function(e){return e.delay})),fe=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return o.a.createElement(me,null,o.a.createElement(ge,{delay:"0s"}),o.a.createElement(ge,{delay:".1s"}),o.a.createElement(ge,{delay:".2s"}))}}]),n}(a.Component),be=n(667),ve=n(665),we=n(663);function ye(){var e=Object(m.a)(["\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n"]);return ye=function(){return e},e}function Ce(){var e=Object(m.a)(["\n    // background-color:#A9A9A9;\n    display: flex;\n    flex-direction: column;\n    width: 35%;\n    margin-left:30px\n    border-radius: 0.5rem;\n    animation: 1.0s ",';\n    transition-timing-function: linear;\n    box-shadow: 0px 3px 15px ;\n    // background: linear-gradient(#abbaab, #ffffff);\n    header{\n        \n        width:100%;\n        height:15%;\n        position:relative;\n        background-image: linear-gradient(to right, #303f9f,#45cafc);\n        border-top-left-radius:10px;\n        border-top-right-radius:10px;\n        border-bottom-left-radius: 50% 20%;\n        border-bottom-right-radius: 50% 20%;\n        color: white;\n        font-size: 30px;\n        text-align: center;\n        font-family: "Times New Roman", Times, serif;\n      }\n']);return Ce=function(){return e},e}function ke(){var e=Object(m.a)(['\n    display : block;\n    position : fixed;\n    z-index: 100;\n    background-image : url("/assets/listening2.gif");\n    /* background-color: black; */\n    background-color: #120724;\n    opacity : 0.5;\n    background-repeat : no-repeat;\n    background-position : center;\n    left : 0;\n    bottom : 0;\n    right : 0;\n    top : 0;\n']);return ke=function(){return e},e}function Ee(){var e=Object(m.a)(["\n    display: flex;\n    height: calc(100vh - 58px);\n    padding:30px;\n"]);return Ee=function(){return e},e}function xe(){var e=Object(m.a)(["",""]);return xe=function(){return e},e}var Ae=Object(I.b)(xe(),D.fadeInUp),Se=I.a.div(Ee()),Oe=I.a.div(ke()),Me=I.a.div(Ce(),Ae),je=I.a.div(ye()),Te=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).toggleListening=function(){a.setState({listening:!a.state.listening})},a.state={chatArray:[],listening:!0,ShowBot:!0,SelTopic:[],DBQuestions:[],CurrentQuestion:[],CurrentRowID:[],TotalCorrectedQuestions:[{AnsweredQuestions:0,TotalQuestions:0}],Checkedval:[],isLoading:!1,selectedvalue:"",selectedQoption:""},a.rdlevelchange=a.rdlevelchange.bind(Object(h.a)(a)),a.selectedmulti=a.selectedmulti.bind(Object(h.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("accessToken");fetch("/api/v1/welcome").then((function(e){return e.json()})).then((function(n){console.log("data",n);var a=e.state.chatArray;Object.keys(n).forEach((function(e){console.log("inside compdidmount",t),""!==t?(console.log("inside if"),a.push({msg:n[e].message,clickable:n[e].clickable,botMsg:!0,Multioption:!1})):(console.log("inside else"),a.push({msg:n[e].message,clickable:!1,botMsg:!0,Multioption:!1}))})),""==t&&a.push({msg:"Please login",botMsg:!0,clickable:!1,Multioption:!1}),e.pushToChat(a)}))}},{key:"pushToChat",value:function(e){this.state.chatArray;this.setState({chatArray:e})}},{key:"rdlevelchange",value:function(e){this.setState({selectedvalue:e.target.value}),console.log("selected event ",e.target.value)}},{key:"selectedmulti",value:function(e){var t=this.state.Checkedval;t.push({val:e.target.value}),this.setState({Checkedval:t})}},{key:"UploadAnswer",value:function(){var e,t=1,n=[],a=this.state.chatArray,o=this.state.CurrentQuestion;e=this.state.CurrentRowID.length?this.state.CurrentRowID[this.state.CurrentRowID.length-1].rowID:-1,Object.keys(o).forEach((function(s){if(s=parseInt(e)+1,console.log("key",s),t>0){for(var r=0,i=o[s].AnsKey.length;r<i;r+=1)n.push({value:o[s].AnsKey.charAt(r)-1}),console.log("AnsArray",n);for(var l=0;l<n.length;l++)console.log("AnsArray[i].value",n[l].value),a.push({msg:o[n[l].value].msg,botMsg:!0,clickable:!1,Multioption:!1});a.push({msg:"Next Question",botMsg:!0,clickable:!0,Multioption:!1})}t--})),this.setState({chatArray:a})}},{key:"UploadQuestions",value:function(e){var t,n,a=this.state.TotalCorrectedQuestions,s=[];console.log("DBQuestions",this.state.DBQuestions);var r=this.state.DBQuestions,i=this.state.chatArray;console.log("Inside uploadQuestions",s);var l=1,c=[];if(this.state.CurrentRowID.length){console.log("CurrentRowID.length-1",this.state.CurrentRowID.length-1);var u=this.state.CurrentRowID[this.state.CurrentRowID.length-1].rowID;if(console.log("CurrentRowID",typeof u),console.log("DBQuestions",r),console.log("DBQuestions",typeof r.length),parseInt(u)+1>=this.state.DBQuestions.length)return i.push({msg:"Done with the questions, please select another topic",botMsg:!0,clickable:!1,Multioption:!1}),i.push({msg:"Topic",botMsg:!0,clickable:!0,Multioption:!1}),void this.setState({chatArray:i});n=u}else n=-1;var h=this;Object.keys(r).forEach((function(e){e=parseInt(n)+1,console.log("key",e),l>0&&(console.log("count",l),""!==r[e].questionText&&(console.log("DBQuestions[key].questionText",r[e].questionText),i.push({msg:r[e].questionText,botMsg:!0,clickable:!1})),1==r[e].MultipleAns?(""!==r[e].answerChoice1&&(c.push(o.a.createElement(be.a,{control:o.a.createElement(ve.a,null),label:r[e].answerChoice1,value:1,onChange:h.selectedmulti})),s.push({msg:r[e].answerChoice1,key:e,choice:1,AnsKey:r[e].correctAnswer})),""!==r[e].answerChoice2&&(c.push(o.a.createElement(be.a,{control:o.a.createElement(ve.a,null),label:r[e].answerChoice2,value:2,onChange:h.selectedmulti})),s.push({msg:r[e].answerChoice2,key:e,choice:2,AnsKey:r[e].correctAnswer})),""!==r[e].answerChoice3&&(c.push(o.a.createElement(be.a,{control:o.a.createElement(ve.a,null),label:r[e].answerChoice3,value:3,onChange:h.selectedmulti})),s.push({msg:r[e].answerChoice3,key:e,choice:3,AnsKey:r[e].correctAnswer})),""!==r[e].answerChoice4&&(c.push(o.a.createElement(be.a,{control:o.a.createElement(ve.a,null),label:r[e].answerChoice4,value:4,onChange:h.selectedmulti})),s.push({msg:r[e].answerChoice4,key:e,choice:4,AnsKey:r[e].correctAnswer})),""!==r[e].answerChoice5&&(c.push(o.a.createElement(be.a,{control:o.a.createElement(ve.a,null),label:r[e].answerChoice5,value:5,onChange:h.selectedmulti})),s.push({msg:r[e].answerChoice5,key:e,choice:5,AnsKey:r[e].correctAnswer})),""!==r[e].answerChoice6&&(c.push(o.a.createElement(be.a,{control:o.a.createElement(ve.a,null),label:r[e].answerChoice6,value:6,onChange:h.selectedmulti})),s.push({msg:r[e].answerChoice6,key:e,choice:6,AnsKey:r[e].correctAnswer})),""!==r[e].answerChoice7&&(c.push(o.a.createElement(be.a,{control:o.a.createElement(ve.a,null),label:r[e].answerChoice7,value:7,onChange:h.selectedmulti})),s.push({msg:r[e].answerChoice7,key:e,choice:7,AnsKey:r[e].correctAnswer}))):(""!==r[e].answerChoice1&&(c.push(o.a.createElement(be.a,{control:o.a.createElement(we.a,null),label:r[e].answerChoice1,value:r[e].answerChoice1,onChange:function(e){return h.setState({selectedQoption:e.target.value})}})),s.push({msg:r[e].answerChoice1,key:e,choice:1,AnsKey:r[e].correctAnswer})),""!==r[e].answerChoice2&&(c.push(o.a.createElement(be.a,{control:o.a.createElement(we.a,null),label:r[e].answerChoice2,value:r[e].answerChoice2,onChange:function(e){return h.setState({selectedQoption:e.target.value})}})),s.push({msg:r[e].answerChoice2,key:e,choice:2,AnsKey:r[e].correctAnswer})),""!==r[e].answerChoice3&&(c.push(o.a.createElement(be.a,{control:o.a.createElement(we.a,null),label:r[e].answerChoice3,value:r[e].answerChoice3,onChange:function(e){return h.setState({selectedQoption:e.target.value})}})),s.push({msg:r[e].answerChoice3,key:e,choice:3,AnsKey:r[e].correctAnswer})),""!==r[e].answerChoice4&&(c.push(o.a.createElement(be.a,{control:o.a.createElement(we.a,null),label:r[e].answerChoice4,value:r[e].answerChoice4,onChange:function(e){return h.setState({selectedQoption:e.target.value})}})),s.push({msg:r[e].answerChoice4,key:e,choice:4,AnsKey:r[e].correctAnswer})),""!==r[e].answerChoice5&&(c.push(o.a.createElement(be.a,{control:o.a.createElement(we.a,null),label:r[e].answerChoice5,value:r[e].answerChoice5,onChange:function(e){return h.setState({selectedQoption:e.target.value})}})),s.push({msg:r[e].answerChoice5,key:e,choice:5,AnsKey:r[e].correctAnswer})),""!==r[e].answerChoice6&&(c.push(o.a.createElement(be.a,{control:o.a.createElement(we.a,null),label:r[e].answerChoice6,value:r[e].answerChoice6,onChange:function(e){return h.setState({selectedQoption:e.target.value})}})),s.push({msg:r[e].answerChoice6,key:e,choice:6,AnsKey:r[e].correctAnswer})),""!==r[e].answerChoice7&&(c.push(o.a.createElement(be.a,{control:o.a.createElement(we.a,null),label:r[e].answerChoice7,value:r[e].answerChoice7,onChange:function(e){return h.setState({selectedQoption:e.target.value})}})),s.push({msg:r[e].answerChoice7,key:e,choice:7,AnsKey:r[e].correctAnswer}))),i.push({msg:c,botMsg:!0,clickable:!1,key:e,choice:1,AnsKey:r[e].correctAnswer,Qoptions:!0,Multioption:!!r[e].MultipleAns}),1==r[e].MultipleAns?i.push({msg:"Submit",botMsg:!0,clickable:!0}):i.push({msg:"Submit Option",botMsg:!0,clickable:!0}),t=a[0].TotalQuestions+1,a[0].TotalQuestions=t,console.log("Total",t)),l--})),this.setState({TotalCorrectedQuestions:a}),console.log("TotalCorrectedQuestions",this.state.TotalCorrectedQuestions),this.setState({CurrentQuestion:s}),console.log("CurrentQuestion is",this.state.CurrentQuestion),this.setState({chatArray:i}),console.log("chatArray is",this.state.chatArray)}},{key:"CheckAnswer",value:function(e){var t,n,a,o=this.state.TotalCorrectedQuestions;console.log("Inside check ans",e);var s=this.state.CurrentQuestion;return console.log("Inside check ans",typeof s,s),Object.keys(s).map((function(r){(console.log("Message is",s[r].msg),e.trim()===s[r].msg)&&(console.log("correct option",s[r].choice),s[r].choice==s[r].AnsKey?(a=s[r].key,n=1,t=o[0].AnsweredQuestions+1,o[0].AnsweredQuestions=t,console.log("Total2",t)):(a=s[r].key,n=2))})),1===n?"1,"+a:"0,"+a}},{key:"CheckForCorrectAns",value:function(e){if(this.state.CurrentQuestion.length){var t,n=this.CheckAnswer(e);console.log("result is",n);var a=n.split(",");console.log("answer_array",a);var o=a[0];"undefined"!==a[1]?t=a[1]:(console.log("It isundefined!"),t=0),console.log("choice,RowID",o,t),this.setState({CurrentRowID:[]});var s=this.state.CurrentRowID;if(s.push({rowID:t}),this.setState({CurrentRowID:s}),console.log("CurrentRowID",s),1==o){var r=this.state.chatArray.slice();r.push({msg:e,botMsg:!1,clickable:!1,Multioption:!1}),r.push({msg:"Right Answer",botMsg:!0,clickable:!1,Multioption:!1}),r.push({msg:"Next Question",botMsg:!0,clickable:!0,Multioption:!1}),this.setState({chatArray:r})}else{var i=this.state.chatArray.slice();i.push({msg:e,botMsg:!1,clickable:!1,Multioption:!1}),i.push({msg:"Wrong Answer",botMsg:!0,clickable:!1,Multioption:!1}),i.push({msg:"See Answer",botMsg:!0,clickable:!0,Multioption:!1}),this.setState({chatArray:i})}}}},{key:"checkMultiAns",value:function(){var e,t,n,a,o=this.state.TotalCorrectedQuestions,s="",r=this.state.chatArray.slice();if(this.state.Checkedval.length){this.state.CurrentQuestion.length&&(console.log("currentQuestion inside multi ans",this.state.CurrentQuestion),a=this.state.CurrentQuestion[0].AnsKey,console.log("AnsKey",a),n=this.state.CurrentQuestion[0].key);var i=this.state.Checkedval;console.log("checkMultiAns",i),Object.keys(i).map((function(e){console.log("Checkedval[key].val",i[e].val),a.includes(i[e].val)?s+=i[e].val:s+="0"})),console.log("checkAns",s)}s==a?(e=o[0].AnsweredQuestions+1,o[0].AnsweredQuestions=e,t=n,r.push({msg:"Right Answer",botMsg:!0,clickable:!1,Multioption:!1}),r.push({msg:"Next Question",botMsg:!0,clickable:!0,Multioption:!1}),this.setState({chatArray:r})):(t=n,r.push({msg:"Wrong Answer",botMsg:!0,clickable:!1,Multioption:!1}),r.push({msg:"See Answer",botMsg:!0,clickable:!0,Multioption:!1}),this.setState({chatArray:r}));var l=this.state.CurrentRowID;l.push({rowID:t}),this.setState({CurrentRowID:l}),console.log("CurrentRowID",l)}},{key:"fetchQuestions",value:function(e){var t=this;if(e){var n=[],a=[],o=this.state.SelTopic,s=localStorage.getItem("accessToken"),r=o[0];this.setState({isLoading:!0}),fetch("/api/v1/getQuestionByTopicAndLevel?topic="+r+"&difficulty_level="+e,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Origin":"*",Authorization:"Bearer "+s}}).then((function(e){return e.json()})).then((function(o){console.log("Questions",o),t.setState({isLoading:!1}),Object.keys(o).forEach((function(e){o[e].correctAnswer.length>1?a.push({questionText:o[e].questionText,answerChoice1:o[e].answerChoice1,answerChoice2:o[e].answerChoice2,answerChoice3:o[e].answerChoice3,answerChoice4:o[e].answerChoice4,answerChoice5:o[e].answerChoice5,answerChoice6:o[e].answerChoice6,answerChoice7:o[e].answerChoice7,answerDescription:o[e].answerDescription,correctAnswer:o[e].correctAnswer,Questions:!0,MultipleAns:!0}):a.push({questionText:o[e].questionText,answerChoice1:o[e].answerChoice1,answerChoice2:o[e].answerChoice2,answerChoice3:o[e].answerChoice3,answerChoice4:o[e].answerChoice4,answerChoice5:o[e].answerChoice5,answerChoice6:o[e].answerChoice6,answerChoice7:o[e].answerChoice7,answerDescription:o[e].answerDescription,correctAnswer:o[e].correctAnswer,Questions:!0,MultipleAns:!1})})),t.setState({CurrentRowID:n}),t.setState({DBQuestions:a});var s=t.state.chatArray.slice();s.push({msg:e,botMsg:!1,clickable:!1,Multioption:!1}),t.setState({chatArray:s}),t.UploadQuestions(e)}))}}},{key:"fetchQuestionLevels",value:function(e){var t=this;if(e){var n=[];n.push(e);var a=localStorage.getItem("accessToken");this.setState({SelTopic:n}),console.log("SelTopic is",n),console.log("inside fetch",e),this.setState({isLoading:!0}),fetch("/api/v1/getDifficultyLevelByTopic?topic="+e,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Origin":"*",Authorization:"Bearer "+a}}).then((function(e){return e.json()})).then((function(e){var n=[];t.setState({isLoading:!1}),console.log("Difflevels",e);var a=t.state.chatArray;a.push({msg:"Please select difficulty levels",botMsg:!0,clickable:!1}),t.setState({selectedvalue:e[0]}),console.log("initial selection : ",t.state.selectedvalue),n.push(),e.map((function(e){return n.push(o.a.createElement("form",null,o.a.createElement(be.a,{control:o.a.createElement(we.a,null),label:e,value:e,name:"groupname",onChange:t.rdlevelchange})))})),a.push({msg:n,botMsg:!0,clickable:!1,Qlevels:!0,Multioption:!1}),a.push({msg:"Submit Level",botMsg:!0,clickable:!0,Qlevels:!0,Multioption:!1}),t.pushToChat(a)}));var s=this.state.chatArray.slice();s.push({msg:e,botMsg:!1,clickable:!1,Multioption:!1}),this.setState({chatArray:s})}}},{key:"fetchTopic",value:function(e){var t=this;if(e){var n=[],a=localStorage.getItem("accessToken");this.setState({isLoading:!0}),console.log("isloading",this.state.isLoading),console.log("accessToken",JSON.stringify(a)),console.log("fetch topic is called"),fetch("/api/v1/getTopics",{method:"GET",headers:{"Content-Type":"application/json","Access-Control-Origin":"*",Authorization:"Bearer "+a}}).then((function(e){return e.json()})).then((function(e){t.setState({isLoading:!1}),console.log("topics",e);var a=t.state.chatArray;a.push({msg:"Please select topic",botMsg:!0,clickable:!1});var s=t;Object.keys(e).forEach((function(t){""!=e[t].topic&&n.push(o.a.createElement("form",null,o.a.createElement(be.a,{control:o.a.createElement(we.a,null),label:e[t].topic,value:e[t].topic,name:"groupname",onChange:s.rdlevelchange})))})),a.push({msg:n,botMsg:!0,clickable:!1,Topic:!0,Multioption:!1}),a.push({msg:"Submit Topic",botMsg:!0,clickable:!0,Topic:!0,Multioption:!1}),t.pushToChat(a)}));var s=this.state.chatArray;s.push({msg:e,botMsg:!1,clickable:!1,Multioption:!1}),this.setState({selTopic:[]}),this.setState({DBQuestions:[]}),this.setState({CurrentQuestion:[]}),this.setState({CurrentRowID:[]}),this.setState({Checkedval:[]}),console.log("SelTopic",this.state.SelTopic),console.log("DBQuestions",this.state.DBQuestions),console.log("CurrentQuestion",this.state.CurrentQuestion),console.log("CurrentRowID",this.state.CurrentRowID),this.setState({chatArray:s}),console.log("chatArray",s)}}},{key:"handleSend",value:function(e){var t=localStorage.getItem("accessToken");if(console.log(JSON.stringify(t)),t)this.handleSendMsg(e);else{var n=this.state.chatArray;n.push({msg:e,botMsg:!1,clickable:!1,Multioption:!1}),n.push({msg:"Please login",botMsg:!0,clickable:!1,Multioption:!1}),this.setState({chatArray:n})}}},{key:"handleSendMsg",value:function(e){if(e){var t=this.state.selectedQoption;if("TOPIC"===e.toUpperCase().trim())this.fetchTopic(e);else if("Submit Topic"===e.trim())console.log("inside elseif loop"),this.fetchQuestionLevels(this.state.selectedvalue);else if("Submit Level"===e.trim())this.fetchQuestions(this.state.selectedvalue);else if("Submit Option"===e.trim())this.CheckForCorrectAns(t);else if("Next Question"===e.trim()){var n=this.state.chatArray;n.push({msg:e,botMsg:!1,clickable:!1,Multioption:!1}),this.setState({chatArray:n}),this.UploadQuestions(e)}else if("See Answer"===e.trim()){var a=this.state.chatArray;a.push({msg:e,botMsg:!1,clickable:!1,Multioption:!1}),this.setState({chatArray:a}),this.UploadAnswer(e)}else if("Submit"==e.trim()){var o=this.state.chatArray;o.push({msg:"Submit",botMsg:!1,clickable:!1,Multioption:!1}),this.setState({chatArray:o}),console.log("inside seleted multi",this.state.Checkedval),this.checkMultiAns()}else{var s=this.state.chatArray;s.push({msg:e,botMsg:!1,clickable:!1,Multioption:!1}),s.push({msg:"Plase enter relevent message!",botMsg:!0,clickable:!1,Multioption:!1}),this.setState({chatArray:s}),this.componentDidMount()}}}},{key:"handleCheck",value:function(e){console.log("checked box is",e);var t=this.state.Checkedval;t.push({val:e}),this.setState({Checkedval:t})}},{key:"operations",value:function(){this.setState({ShowBot:!this.state.ShowBot})}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(G.Provider,{value:{toggleListening:this.toggleListening}},o.a.createElement(Oe,{hidden:this.state.listening}),o.a.createElement(Q,{className:"NewChat"}),o.a.createElement(Se,{className:"chatWindow"},o.a.createElement(je,{className:"chatterDiv"},o.a.createElement(ce,{AnsweredQuestions:this.state.TotalCorrectedQuestions[0].AnsweredQuestions,TotalQuestions:this.state.TotalCorrectedQuestions[0].TotalQuestions})),o.a.createElement(Me,null,o.a.createElement("header",{className:"headers"},o.a.createElement("img",{src:"/assets/logobot.png",width:"40px",height:"40px"}),"  ALA"),o.a.createElement(W,{chatArray:this.state.chatArray,onClick:function(t){return e.handleSend(t)},onCheck:function(t){return e.handleCheck(t)}}),this.state.isLoading&&o.a.createElement(fe,null),o.a.createElement(Z,{onSend:function(t){return e.handleSend(t)}})))))}}]),n}(a.Component);var Qe=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(i.a,null,o.a.createElement(l.c,null,o.a.createElement(l.a,{component:Te}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(Qe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[227,1,2]]]);
//# sourceMappingURL=main.89229b75.chunk.js.map